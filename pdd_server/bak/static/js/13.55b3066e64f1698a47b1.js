webpackJsonp([13],{"06NH":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),a=e.n(i),c=e("gyMJ"),o=e("NYxO"),n=e("j3Q2"),r=e("GQaK"),l={name:"ShopCart",data:function(){return{isSelectAll:!1,totalPrice:0,currentDelGoods:{}}},computed:a()({},Object(o.d)(["userInfo","cartgoods"])),activated:function(){this.$store.dispatch("reqCartsGoods"),this._initWrapper()},mounted:function(){this.$store.dispatch("reqCartsGoods")},components:{SelectLogin:n.a},methods:{_initWrapper:function(){this.$refs.wrapper&&(this.$refs.wrapper.style.height=document.getElementById("app").offsetHeight-document.getElementById("bottomTabBar").offsetHeight-document.getElementById("shopCartHeader").offsetHeight-document.getElementById("tab_bar").offsetHeight+"px",this.$refs.content.style.minHeight=this.$refs.wrapper.offsetHeight+1+"px")},updateGoodsCount:function(t,s){Object(c.n)(t.buy_count,t.goods_id,this.userInfo.id,s),this.$store.dispatch("reqCartsGoods"),this.getAllGoodsPrice()},selectAll:function(t){this.isSelectAll=!this.isSelectAll,this.$store.dispatch("selectedAll",{isSelectAll:t}),this.getAllGoodsPrice()},getAllGoodsPrice:function(){var t=0;this.cartgoods.forEach(function(s,e){s.checked&&(t+=s.price/100*s.buy_count)}),this.totalPrice=t},singerGoodsSelected:function(t){this.$store.dispatch("singerGoodsSelected",{goods:t}),this.getAllGoodsPrice(),this.isSelectedAll()},isSelectedAll:function(){var t=!0;this.cartgoods.forEach(function(s,e){s.checked||(t=!1)}),this.isSelectAll=t},clickTrash:function(t){var s=this;this.$messagebox.confirm("您确定删除该商品吗?").then(function(e){"confirm"===e&&(Object(c.n)(0,t.goods_id,s.userInfo.id,!1),s.$store.dispatch("reqCartsGoods"),s.getAllGoodsPrice())})},_initBScroll:function(){this.listScroll=new r.a(".jd_shopCart_list",{click:!0,scrollY:!0,bounceTime:300}),this.listScroll.on("touchEnd",function(t){})}},watch:{cartgoods:function(){var t=this;this.$nextTick(function(){t.listScroll?t.listScroll.refresh():t._initBScroll(),t.isSelectAll&&t.$store.dispatch("selectedAll",{isSelectAll:!1}),t.getAllGoodsPrice()})}},filters:{moneyFormat:function(t){return"¥"+t.toFixed(2)}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"shop-cart"},[t.userInfo.id?e("div",{staticClass:"cart"},[t._m(0),t._v(" "),e("main",{ref:"wrapper",staticClass:"jd_shopCart_list"},[e("section",{ref:"content"},t._l(t.cartgoods,function(s,i){return e("div",{key:i,staticClass:"shopCart_list_con"},[e("div",{staticClass:"list_con_left"},[e("a",{staticClass:"cart_check_box",attrs:{href:"javascript:;",checked:s.checked},on:{click:function(e){e.preventDefault(),t.singerGoodsSelected(s)}}})]),t._v(" "),e("div",{staticClass:"list_con_right"},[e("div",{staticClass:"shop_img"},[e("img",{attrs:{src:s.thumb_url}})]),t._v(" "),e("div",{staticClass:"shop_con"},[e("a",{attrs:{href:"javascript:;"}},[t._v(t._s(s.goods_name))]),t._v(" "),e("p",{staticClass:"shop_price"},[t._v(t._s(t._f("moneyFormat")(s.price/100,s.price)))]),t._v(" "),e("div",{staticClass:"shop_deal"},[e("div",{staticClass:"shop_deal_left"},[e("button",{staticClass:"change",on:{click:function(e){e.preventDefault(),t.updateGoodsCount(s,!1)}}},[t._v("-")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.buy_count,expression:"goods.buy_count"}],attrs:{type:"tel",value:"1",disabled:"disabled"},domProps:{value:s.buy_count},on:{input:function(e){e.target.composing||t.$set(s,"buy_count",e.target.value)}}}),t._v(" "),e("button",{staticClass:"change",on:{click:function(e){e.preventDefault(),t.updateGoodsCount(s,!0)}}},[t._v("+")])]),t._v(" "),e("div",{staticClass:"shop_deal_right",on:{click:function(e){e.preventDefault(),e.stopPropagation(),t.clickTrash(s)}}},[e("span"),t._v(" "),e("span")])])])])])}))]),t._v(" "),e("div",{attrs:{id:"tab_bar"}},[e("div",{staticClass:"tab-bar-left"},[e("a",{staticClass:"cart_check_box",attrs:{href:"javascript:;",checked:t.isSelectAll},on:{click:function(s){s.preventDefault(),s.stopPropagation(),t.selectAll(t.isSelectAll)}}}),t._v(" "),e("span",{staticStyle:{"font-size":"16px"}},[t._v("全选")]),t._v(" "),e("div",{staticClass:"select-all"},[t._v("\n          合计："),e("span",{staticClass:"total-price"},[t._v(t._s(t._f("moneyFormat")(t.totalPrice,t.totalPrice)))])])]),t._v(" "),t._m(1)])]):e("select-login")],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"shopCartHeader"}},[s("div",{staticClass:"header"},[s("a",{staticClass:"icon_back",attrs:{href:"javascript:;"}}),this._v(" "),s("h3",[this._v("购物车")]),this._v(" "),s("a",{staticClass:"icon_menu",attrs:{href:"javascript:;"}})]),this._v(" "),s("div",{staticClass:"jd_safe_tip"},[s("p",{staticClass:"tip_word"},[this._v("\n          您正在安全购物环境中，请放心购物\n        ")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"tab-bar-right"},[s("a",{staticClass:"pay",attrs:{href:"javascript:;"}},[this._v("去结算")])])}]};var h=e("VU/8")(l,d,!1,function(t){e("43QB")},"data-v-99aec082",null);s.default=h.exports},"43QB":function(t,s){}});