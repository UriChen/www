webpackJsonp([7],{BUyl:function(t,e){},FPbO:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("Xxa5"),s=i.n(n),o=i("exGp"),c=i.n(o),r=i("Dd8w"),a=i.n(r),l=i("NYxO"),u={name:"ShopList",props:{item:Object,clickCellBtn:{type:Function,default:function(){}}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"recommend-item"},[t.item.thumb_url?i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.item.thumb_url,expression:"item.thumb_url"}],attrs:{width:"100%"}}):t._e(),t._v(" "),i("h4",{staticClass:"item-title"},[t._v(t._s(t.item.short_name))]),t._v(" "),i("div",{staticClass:"item-bottom"},[i("span",{staticClass:"item-price"},[t._v("¥"+t._s(t.item.price/100))]),t._v(" "),i("span",{staticClass:"item-sales"},[t._v(t._s(t.item.sales_tip))]),t._v(" "),i("button",{staticClass:"item-btn",on:{click:function(e){t.clickCellBtn(t.item)}}},[t._v("加入购物车")])])])},staticRenderFns:[]};var p=i("VU/8")(u,m,!1,function(t){i("gixf")},"data-v-142676b6",null).exports,d=i("GQaK"),h=i("gyMJ"),f=i("j3Q2"),_={name:"Recommend",data:function(){return{page:1,count:8}},computed:a()({},Object(l.d)(["recommendshoplist","userInfo"])),mounted:function(){var t=this;this.$indicator.open("加载中..."),this.$store.dispatch("reqRecommendShopList",{page:this.page,count:this.count,callback:function(){t.$indicator.close()}}),this._initWrapper()},components:{ShopList:p,SelectLogin:f.a},watch:{recommendshoplist:function(){var t=this;this.$nextTick(function(){t.listScroll?t.listScroll.refresh():t._initBScroll(),t.page+=1})}},methods:{_initWrapper:function(){this.$refs.wrapper&&(this.$refs.wrapper.style.height=document.getElementById("app").offsetHeight-document.getElementById("bottomTabBar").offsetHeight+"px",this.$refs.content.style.minHeight=this.$refs.wrapper.offsetHeight+1+"px")},_initBScroll:function(){var t=this;this.listScroll=new d.a(".recommend-container",{scrollY:!0,probeType:3,click:!0,bounceTime:300}),this.listScroll.on("touchEnd",function(e){t.listScroll.maxScrollY>e.y+50&&(t.$indicator.open("加载中..."),t.$store.dispatch("reqRecommendShopList",{page:t.page,count:t.count,callback:function(){t.$indicator.close()}}))}),this.listScroll.on("scrollEnd",function(){t.listScroll.refresh()})},dealWithCellBtnClick:function(t){var e=this;return c()(s.a.mark(function i(){var n;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(h.a)(e.userInfo.id,t.goods_id,t.goods_name,t.thumb_url,t.price);case 2:n=i.sent,e.$toast({message:n.message,duration:1e3}),e.$store.dispatch("reqCartsGoods");case 5:case"end":return i.stop()}},i,e)}))()}},activated:function(){this.$store.dispatch("reqCartsGoods")}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"wrapper",staticClass:"recommend-container"},[i("ul",{ref:"content",staticClass:"recommend"},t._l(t.recommendshoplist,function(e,n){return t.userInfo.id&&t.recommendshoplist.length>0?i("shop-list",{key:n,attrs:{tag:"li",item:e,clickCellBtn:t.dealWithCellBtnClick}}):t._e()})),t._v(" "),t.userInfo.id?t._e():i("select-login")],1)},staticRenderFns:[]};var g=i("VU/8")(_,v,!1,function(t){i("BUyl")},"data-v-39e93f0f",null);e.default=g.exports},gixf:function(t,e){}});