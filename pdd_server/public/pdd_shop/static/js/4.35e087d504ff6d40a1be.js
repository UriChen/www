webpackJsonp([4],{RuJK:function(t,i){},bgZr:function(t,i){},laiI:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("Dd8w"),n=e.n(s),o=e("GQaK"),a=e("NYxO"),r={name:"HotNav",data:function(){return{screenW:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,scrollContentW:720,bgBarW:100,barXWidth:0,startX:0,endFlag:0,barMoveWidth:0}},computed:n()({},Object(a.d)(["homenav"]),{innerBarStyle:function(){return{width:this.barXWidth+"px",left:this.barMoveWidth+"px"}}}),mounted:function(){this._initWidth(),this.getBottomBarWidth(),this.bindEvent()},activated:function(){this.hotNavScroll?this.hotNavScroll.refresh():this._initBScroll()},watch:{homenav:function(){var t=this;this.$nextTick(function(){t.hotNavScroll?t.hotNavScroll.refresh():t._initBScroll()})}},methods:{_initWidth:function(){this.$refs.content.offsetWidth>720&&(this.scrollContentW=1200,this.bgBarW=200)},_initBScroll:function(){var t=this.$refs.wrapper;this.hotNavScroll=new o.a(t,{scrollX:!0,click:!0,bounce:300,momentum:!1})},getBottomBarWidth:function(){this.barXWidth=this.bgBarW*(this.screenW/this.scrollContentW)},bindEvent:function(){this.$el.addEventListener("touchstart",this.handleTouchStart,!0),this.$el.addEventListener("touchmove",this.handleTouchMove,!0),this.$el.addEventListener("touchend",this.handleTouchEnd,!0)},handleTouchStart:function(t){var i=t.touches[0];this.startX=Number(i.pageX)},handleTouchMove:function(){var t=event.touches[0],i=Number(t.pageX)-this.startX;this.barMoveWidth=-(this.bgBarW/this.scrollContentW*i-this.endFlag),this.barMoveWidth<=0?this.barMoveWidth=0:this.barMoveWidth>=this.bgBarW-this.barXWidth&&(this.barMoveWidth=this.bgBarW-this.barXWidth)},handleTouchEnd:function(){this.endFlag=this.barMoveWidth},goToBoutique:function(t){var i="/boutique?title="+t;this.$router.push(i)}}},h={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"hot-nav"},[e("div",{ref:"wrapper",staticClass:"hot-nav-content"},[e("div",{ref:"content",staticClass:"nav-content-inner"},t._l(t.homenav,function(i,s){return t.homenav.length>0?e("a",{key:s,staticClass:"inner-item",attrs:{href:"javascript:;"},on:{click:function(e){e.preventDefault(),t.goToBoutique(i.icontitle)}}},[e("img",{attrs:{src:i.iconurl}}),t._v(" "),e("span",[t._v(t._s(i.icontitle))])]):t._e()}))]),t._v(" "),e("div",{staticClass:"hot-nav-bottom"},[e("div",{staticClass:"hot-nav-bottom-inner",style:t.innerBarStyle})])])},staticRenderFns:[]};var c=e("VU/8")(r,h,!1,function(t){e("bgZr")},"data-v-7e30c619",null).exports,l={name:"HotShopList",computed:n()({},Object(a.d)(["homeshoplist"])),methods:{goToShop:function(t){var i="/shop?id="+t;this.$router.push(i)}}},u={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.homeshoplist.length>0?e("div",{ref:"shoplist",staticClass:"shop-container"},[e("ul",{staticClass:"shop-list"},t._l(t.homeshoplist,function(i,s){return e("li",{key:s,staticClass:"shop-list-item"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:i.image_url,expression:"shop.image_url"}],attrs:{width:"100%"}}),t._v(" "),e("h4",{staticClass:"list-item-title"},[t._v(t._s(i.goods_name))]),t._v(" "),e("div",{staticClass:"list-item-bottom"},[e("span",{staticClass:"item-price"},[t._v("¥"+t._s(i.normal_price/100))]),t._v(" "),e("span",{staticClass:"item-counter"},[t._v(t._s(i.sales_tip))]),t._v(" "),e("span",{staticClass:"item-buy"},[e("button",{staticClass:"btn",on:{click:function(e){t.goToShop(i.goods_id)}}},[t._v("去抢购 >")])])])])}))]):t._e()},staticRenderFns:[]};var d=e("VU/8")(l,u,!1,function(t){e("yuBG")},"data-v-8d30ad50",null).exports,p={name:"Hot",data:function(){return{page:1,count:5}},computed:n()({},Object(a.d)(["homecasual","homeshoplist"])),mounted:function(){var t=this;this.$store.dispatch("reqHomeCasual"),this.$store.dispatch("reqHomeNav"),this.$indicator.open("加载中..."),this.$store.dispatch("reqHomeShopList",{page:this.page,count:this.count,callback:function(){t.$indicator.close()}}),this.$store.dispatch("reqCartsGoods"),this._initWrapper()},activated:function(){this.adSwiper?this.adSwiper.autoplay.start():this._initSwiper()},beforeRouteLeave:function(t,i,e){this.adSwiper.autoplay.stop(),e()},methods:{_initWrapper:function(){this.$refs.wrapper&&(this.$refs.wrapper.style.height=document.getElementById("app").offsetHeight-document.getElementById("topTabBar").offsetHeight-document.getElementById("bottomTabBar").offsetHeight+"px",this.$refs.content.style.minHeight=this.$refs.wrapper.offsetHeight+1+"px")},_initBScroll:function(){var t=this,i=this.$refs.wrapper;this.hotScroll=new o.a(i,{scrollY:!0,click:!1,bounceTime:300,pullDownRefresh:{threshold:50},pullUpLoad:{threshold:-50}}),this.hotScroll.on("pullingDown",function(){t.$router.go(0),t.hotScroll.finishPullDown()}),this.hotScroll.on("pullingUp",function(){t.$indicator.open("加载中..."),t.$store.dispatch("reqHomeShopList",{page:t.page,count:t.count,callback:function(){t.$indicator.close()}}),t.hotScroll.finishPullUp()}),this.hotScroll.on("scrollEnd",function(){t.hotScroll.refresh()})},_initSwiper:function(){this.adSwiper=new Swiper(".swiper-container",{autoplay:!0,loop:!0,pagination:{el:".swiper-pagination"}})}},watch:{homecasual:function(){var t=this;this.$nextTick(function(){t._initSwiper()})},homeshoplist:function(){var t=this;this.$nextTick(function(){t.hotScroll?t.hotScroll.refresh():t._initBScroll(),t.page+=1})}},components:{HotNav:c,HotShopList:d}},v={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{ref:"wrapper",staticClass:"hot"},[i("div",{ref:"content",staticClass:"list"},[this.homecasual.length>0?i("div",{staticClass:"swiper-container"},[i("div",{staticClass:"swiper-wrapper"},this._l(this.homecasual,function(t,e){return i("div",{key:e,staticClass:"swiper-slide"},[i("img",{attrs:{src:t.imgurl,width:"100%"}})])})),this._v(" "),i("div",{staticClass:"swiper-pagination"})]):this._e(),this._v(" "),i("hot-nav"),this._v(" "),i("hot-shop-list")],1)])},staticRenderFns:[]};var f=e("VU/8")(p,v,!1,function(t){e("RuJK")},"data-v-51634510",null);i.default=f.exports},yuBG:function(t,i){}});